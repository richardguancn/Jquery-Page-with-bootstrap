(function(e){jQuery.fn.page=function(t){function r(){if(t.totalCount%t.pageSize==0){t.pageCount=t.totalCount/t.pageSize}else{t.pageCount=parseInt(t.totalCount/t.pageSize)+1}if(t.currentpage>t.pageCount)t.currentpage=t.pageCount;var e="",n=parseInt(t.currentpage)-1,r=parseInt(t.currentpage)+1,i=0,s=0;if(t.pageCount<=1)return;var o=window.location.href;var u=location.search;if(u!=""){var a=u.split("&");var f=true;for(var l=0;l<a.length;l++){if(a[l].indexOf(t.pageParamName+"=")>-1){a[l]=t.pageParamName+"=(p)";f=false;break}}if(f)a.push(t.pageParamName+"=(p)");if(a.length==1)o=window.location.pathname+"?"+a.join("&");else o=window.location.pathname+a.join("&")}else{o+="?"+t.pageParamName+"=(p)"}if(n>1){e+='<li><a href="'+o.replace("(p)",n)+'">&lt;</a></li>'}i=t.currentpage-2;s=t.currentpage+2;if(s>t.pageCount){s=t.pageCount;i=s-t.divPoint}if(i<1)i=1;if(t.pageCount>t.divPoint&&s-i<4)s=t.divPoint;for(var l=i;l<=s;l++){if(l>t.pageCount)break;if(l==t.currentpage){e+='<li class="active"><a href="#">'+l+"</a></li>"}else{e+='<li><a href="'+o.replace("(p)",l)+'">'+l+"</a></li>"}}if(r<t.pageCount){e+='<li><a href="'+o.replace("(p)",r)+'">&gt;</a></li>'}e='<ul class="pagination">'+e+"</ul>";return e}var n={currentpage:1,pageCount:0,totalCount:0,pageSize:20,divPoint:5,pageParamName:"page"};var t=e.extend(n,t);e(this).html(r())}})(jQuery)
